<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"/>
	 <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'">
    
    <title>Guia.R</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="css/font-awesome.css" rel="stylesheet" type="text/css">    
    
    <!-- MENU -->
    <link href="css/snap.css" rel="stylesheet">
        
    <link href="css/index.css" rel="stylesheet" type="text/css">
	<link href="css/reproductor_audio.css" rel="stylesheet" type="text/css">

    <!-- SPLASH LOADING -->
    <link href="css/loading.css" rel="stylesheet" type="text/css">
    <link href="css/animacion_descarga.css" rel="stylesheet" type="text/css">    
    
    <!-- TOGGLES -->
    <link href="css/toggles.css" rel="stylesheet" type="text/css"> 
    
    <link href="css/lightbox/jquery.fancybox.css" rel="stylesheet" type="text/css">      
    
</head>
<body>
	<style>
		.snapjs-left .snap-drawers {
			display: block;
		}
		.snap-drawers {
			display: none;
			background-color:#FFF;
		}
		.snap-drawer{
			background-color:#FFF;
			box-shadow: 5px 0px 20px #888888;			
		}
	</style>
	<!-- Splash loading... -->
 	<div class="spinner" style="display: none;" id="splashLoading">
        <div class="cube1"></div>
        <div class="cube2"></div>
    </div>
    
    <div id="menu"></div>
    <div id="contenido_general">
	    <div id="cabecera"></div>
	    <div id="contenido"  class="snap-content"></div>        
    </div>    
    <div id="pie"></div>
    
    <!-- GALERIA - La coloco aca para que no scrollee el lightbox y ocupe toda la pantalla. -->
    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    
        <!-- Background of PhotoSwipe. 
             It's a separate element as animating opacity is faster than rgba(). -->
        <div class="pswp__bg"></div>
    
        <!-- Slides wrapper with overflow:hidden. -->
        <div class="pswp__scroll-wrap">
    
            <!-- Container that holds slides. 
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
            <div class="pswp__container">
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
            </div>
    
            <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
            <div class="pswp__ui pswp__ui--hidden">
    
                <div class="pswp__top-bar">
    
                    <!--  Controls are self-explanatory. Order can be changed. -->
    
                    <div class="pswp__counter"></div>
    
                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
    
                    
    
                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
    
                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
    
                    <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                    <div class="pswp__preloader">
                        <div class="pswp__preloader__icn">
                          <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                          </div>
                        </div>
                    </div>
                </div>
    
                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                    <div class="pswp__share-tooltip"></div> 
                </div>
    
                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
                </button>
    
                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
                </button>
    
                <div class="pswp__caption">
                    <div class="pswp__caption__center"></div>
                </div>
    
            </div>
    
        </div>
    
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>	
    <script type="text/javascript" src="js/utiles.js"></script>	    
    <script type="text/javascript" src="js/libs/jquery.js"></script>	
    <script type="text/javascript" src="js/libs/bootstrap.min.js"></script>	
    <script type="text/javascript" src="js/libs/reproductor_audio.js"></script> 
    <script type="text/javascript" src="js/libs/snap.js"></script> 
    <script type="text/javascript" src="js/libs/jquery.fancybox.js"></script>
    <script type="text/javascript" src="js/libs/zoom.js"></script>   <!-- e-smart-zoom-jquery.min --> 
    <script type="text/javascript" src="js/libs/jssor.slider-20.mini.js"></script> 
    
    <script>
		app.initialize();
		
		//alert(encrypt("1363","93bt0QWJ"));
		var urlSd = "";
		var archivoActivo = "";			
		var datos_a_sincronizar = true;
		$(document).ready(function() {	
			var lugarAlmacenamiento = cordova.file.externalDataDirectory;
			console.log("test:"+lugarAlmacenamiento);			
			if(lugarAlmacenamiento == null){
				lugarAlmacenamiento = cordova.file.dataDirectory;
			}

			urlSd = lugarAlmacenamiento + "GuiaR/";
			document.addEventListener("backbutton", onBackKeyDown, false);
			insertar_html("views/pie.html", "pie");								
			insertar_html("views/menu.html", "menu");
			insertar_html("views/cabecera.html", "cabecera");
//			 window.localStorage.clear();		
			verificar_recorridos();						
		});		
		
		function iniciarApp(){
			var ult_web = window.localStorage.getItem("ultima_web");
			var saltear_saludo = window.localStorage.getItem("saltear_saludo");
			if((ult_web == null)||(saltear_saludo == null)||(saltear_saludo == "false")){
				cambiar_contenido("views/saludo.html", "", false, true);			
			}else{
				var ult_web_menu = window.localStorage.getItem("ultima_web_menu");			
				var ult_web_pie = window.localStorage.getItem("ultima_web_pie");			
				var ult_web_cabecera = window.localStorage.getItem("ultima_web_cabecera");			
				cambiar_contenido(ult_web, ult_web_cabecera, ult_web_menu, ult_web_pie);			
			}
		}
		
		function verificar_recorridos(){
			archivoActivo =  "recorridos.json";		
			window.resolveLocalFileSystemURL(urlSd + archivoActivo, existeArchivo, descargarArchivo); 
		}
		
		//
		function existeArchivo(url) {					
			$.getJSON(urlHost+urlCheckearActualizaciones+"fecha:2022-09-27", function( data ) {			
				var items = [];
				$.each( data, function( key, item ) {					
					console.log(item.resultado);	
					if(item.resultado==false){
						iniciarApp();
					}else{
						cambiar_contenido("views/sincronizacion.html", "Sincronización", true, true);					
					}
				});
			});			
			//cambiar_contenido("views/sincronizacion.html", "Sincronización", true, true);					
		}
		
		function descargarArchivo(){
			console.log("no existe");			
			cambiar_contenido("views/sincronizacion.html", "Sincronización", true, true);	
		}				
	</script>
    
</body>
</html>
