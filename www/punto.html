<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"/>
    
    <title>ALPI</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="css/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="css/jplayer.blue.monday.css" rel="stylesheet" type="text/css">     
    <link href="css/snap.css" rel="stylesheet">
	<link href="css/index.css" rel="stylesheet" type="text/css">
</head>
<body>
	<style>
		.snapjs-left .snap-drawers {
			display: block;
		}
		.snap-drawers {
			display: none;
			background-color:#EEEEEE;
		}
		.snap-drawer{
			background-color:#EEEEEE;
		}
    </style>
    <body>
        <div class="snap-drawers">
             <div class="snap-drawer snap-drawer-left">
                <div class="col-xs-12 fondo_top" style="height:50px;">
                    <div id="top_titulo" style="border-bottom: 1px solid #e5e5e5; padding: 12px;"><span>Menú de Opciones</span></div>
                </div>
                <div class="col-xs-12" style="margin-top: 10px;">
                    <p class="menu_opciones" style="font-size: 16px; text-align: center;"><b>¿Que estas buscando?</b></p>
                </div>
                <div class="col-xs-12">
                    <select id="selectRubrosBusqueda" class="input_buscar">
                    </select>
                </div>
                <div class="col-xs-12" style="margin-top: 15px;">
                    <input id="inputBusqueda" class="input_buscar" name="inputBusqueda" type="text" placeholder="buscar por nombre...">
                </div>
                <div class="col-xs-12" style="margin-top: 15px;">
                    <button type="button" class="btn btn-primary boton_verde_alpi" onclick="realizarBusqueda()" 
                    style="border-radius: 40px; height: 40px; width: 100%;">
                        <i class="fa fa-search" style="margin-left:-1px;"></i>
                    </button>
                </div>
                <div class="col-xs-12" style="margin-top: 20px; margin-left:5px">
                    <div id="divAjaxResultadoBusqueda"></div>
                </div>
                <div class="col-xs-12"  style="margin-top: 20px; margin-left:5px">
                    <div class="menu_opciones jframe_sugerencia"><i class="fa fa-envelope" style="margin-right: 5px;"></i>Sugerencias</div>
                </div>
                <div class="col-xs-12" style="margin-top: 15px; margin-left:5px">
                    <div class="menu_opciones jframe_about"><i class="fa fa-info-circle" style="margin-right: 5px;margin-left:2px"></i>About</div>
                </div>
            </div> 
        </div>    	    
    
    	<div id="contenido"  class="snap-content">    
            <nav class="navbar navbar-default navbar-fixed-top">        
                <div class="container fondo_top">
                    <div id="do-drag" style="height: 50px;">
                        <div id="btn_menu" class="sb-toggle-left top_btn_menu"><em class="fa fa-bars"></em></div>
                        <div id="top_titulo"><span>Recorridos</span></div>
                        <div id="botonera_top"><i class="fa fa-refresh"></i></div>
                    </div>	
                    <div id="divInfoEntidad" style="display:none; width:100%; border-top: solid 2px #e5e5e5;">
                        <div id="swipe_zona_marker;" style="border-bottom: solid 2px #e5e5e5;">
                            <div class="row" style="padding: 10px;">
                                <div class="col-xs-4" style="text-align: center;">
                                    <a id="infoEntidadImgA" href="#"><img id="infoEntidadImg" src="#" style="height: 80px;border-radius: 10px;"></a>
                                </div>
                                <div class="col-xs-8"> 
                                    <i id="marker_cruz" class="fa fa-times" style="font-size: 16px; float: right; margin-right: 0px; margin-top: 0px;"></i>
                                    <h5 style="margin-top: 0px; font-weight: bold;" id="infoEntidadTitulo"></h5>
                                    <span id="infoEntidadCopete"></span>
                                </div>
                            </div>
                        </div>
                        <div id="div_toggle_detalle" style="width:100%; text-align: center;">
                            <i id="marker_flecha" class="fa fa-caret-down" style="padding: 8px; font-size: 16px;"></i>
                        </div>
                    </div>        
                </div>         
            </nav>
            <div id="jquery_jplayer_1" class="jp-jplayer"></div>
            <div id="jplayer_inspector"></div>
            <div id="jp_container_1" class="reproductor_audio">
            	<div class="jp-type-single">
					<div class="jp-gui jp-interface">
                        <div class="jp-progress" id="reproduccion_barra">
                            <div class="jp-seek-bar">
                                <div class="jp-play-bar" style="background-color: #01a3bc;"></div>
                            </div>
                        </div>
                        <i class="fa fa-headphones auriculares"></i>
                        <i class="fa fa-step-backward botones_reproduccion"></i>
                        <a class="jp-pause" href="#"><i class="fa fa-pause botones_reproduccion"></i></a>
                        <a class="jp-play" href="#"><i class="fa fa-play botones_reproduccion"></i></a>
                        <i class="fa fa-step-forward botones_reproduccion"></i>
                        <a class="jp-stop" href="#"><i class="fa fa-stop botones_reproduccion"></i></a>
                        <ul style="display: none;">
                            <li><a href="http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3" class="track track-default">Cro Magnon Man</a></li>
                        </ul>	
                    </div>
                  </div>	
            </div>
            <div class="borde_bottom">
                <img src="img/logo_largo_muni.png" class="img-responsive" style="max-height:30px; margin: auto; padding-top: 8px;">
            </div>
        </div>         
		<script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>		
        <script type="text/javascript" src="js/libs/jquery.js"></script>		
        <script type="text/javascript" src="js/libs/bootstrap.min.js"></script>	
        <script type="text/javascript" src="js/libs/snap.js"></script>   
        <script type="text/javascript" src="js/libs/jquery.jplayer.min.js"></script>
        <script type="text/javascript">
			var snapper = new Snap({
				element: document.getElementById('contenido'),
				dragger: document.getElementById('do-drag'),
				disable: 'right'
			});				
	
			app.initialize();		
			(function($) {
				$(document).ready(function() {				
					//mySlidebars = new $.slidebars();
					/*var busqueda = window.localStorage.getItem("busqueda");
					if(busqueda != ""){
						var resultado = window.localStorage.getItem("resultado");
					}*/		
						
					$('#btn_menu').click(function(e) {
						 snapper.open('left');  
					});
					
					var id = "#jquery_jplayer_1";

					var bubble = {
						title:"Bubble",
						mp3:"madre.mp3"
					};
					var lismore = {
						title:"Lismore",
						mp3:"madre.mp3",
					};
				
					var options = {
						swfPath: "js/libs/jplayer",
						supplied: "mp3,oga",
						wmode: "window",
						useStateClassSkin: true,
						autoBlur: false,
						smoothPlayBar: true,
						keyEnabled: true,
						remainingDuration: true,
						toggleDuration: true
					};
				
					var myAndroidFix = new jPlayerAndroidFix(id, bubble, options);
				
					$('#setMedia-Bubble').click(function() {
						myAndroidFix.setMedia(bubble);
					});
					$('#setMedia-Bubble-play').click(function() {
						myAndroidFix.setMedia(bubble).play();
					});
				
					$('#setMedia-Lismore').click(function() {
						myAndroidFix.setMedia(lismore);
					});
					$('#setMedia-Lismore-play').click(function() {
						myAndroidFix.setMedia(lismore).play();
					});
				
				
					$("#jplayer_inspector").jPlayerInspector({jPlayer:$("#jquery_jplayer_1")});
				});			
			}) (jQuery);					
			
			var jPlayerAndroidFix = (function($) {
				var fix = function(id, media, options) {
					this.playFix = false;
					this.init(id, media, options);
				};
				fix.prototype = {
					init: function(id, media, options) {
						var self = this;
			
						// Store the params
						this.id = id;
						this.media = media;
						this.options = options;
			
						// Make a jQuery selector of the id, for use by the jPlayer instance.
						this.player = $(this.id);
			
						// Make the ready event to set the media to initiate.
						this.player.bind($.jPlayer.event.ready, function(event) {
							// Use this fix's setMedia() method.
							self.setMedia(self.media);
						});
			
						// Apply Android fixes
						if($.jPlayer.platform.android) {
			
							// Fix playing new media immediately after setMedia.
							this.player.bind($.jPlayer.event.progress, function(event) {
								if(self.playFixRequired) {
									self.playFixRequired = false;
			
									// Enable the contols again
									// self.player.jPlayer('option', 'cssSelectorAncestor', self.cssSelectorAncestor);
			
									// Play if required, otherwise it will wait for the normal GUI input.
									if(self.playFix) {
										self.playFix = false;
										$(this).jPlayer("play");
									}
								}
							});
							// Fix missing ended events.
							this.player.bind($.jPlayer.event.ended, function(event) {
								if(self.endedFix) {
									self.endedFix = false;
									setTimeout(function() {
										self.setMedia(self.media);
									},0);
									// what if it was looping?
								}
							});
							this.player.bind($.jPlayer.event.pause, function(event) {
								if(self.endedFix) {
									var remaining = event.jPlayer.status.duration - event.jPlayer.status.currentTime;
									if(event.jPlayer.status.currentTime === 0 || remaining < 1) {
										// Trigger the ended event from inside jplayer instance.
										setTimeout(function() {
											self.jPlayer._trigger($.jPlayer.event.ended);
										},0);
									}
								}
							});
						}
			
						// Instance jPlayer
						this.player.jPlayer(this.options);
			
						// Store a local copy of the jPlayer instance's object
						this.jPlayer = this.player.data('jPlayer');
			
						// Store the real cssSelectorAncestor being used.
						this.cssSelectorAncestor = this.player.jPlayer('option', 'cssSelectorAncestor');
			
						// Apply Android fixes
						this.resetAndroid();
			
						return this;
					},
					setMedia: function(media) {
						this.media = media;
			
						// Apply Android fixes
						this.resetAndroid();
			
						// Set the media
						this.player.jPlayer("setMedia", this.media);
						return this;
					},
					play: function() {
						// Apply Android fixes
						if($.jPlayer.platform.android && this.playFixRequired) {
							// Apply Android play fix, if it is required.
							this.playFix = true;
						} else {
							// Other browsers play it, as does Android if the fix is no longer required.
							this.player.jPlayer("play");
						}
					},
					resetAndroid: function() {
						// Apply Android fixes
						if($.jPlayer.platform.android) {
							this.playFix = false;
							this.playFixRequired = true;
							this.endedFix = true;
							// Disable the controls
							// this.player.jPlayer('option', 'cssSelectorAncestor', '#NeverFoundDisabled');
						}
					}
				};
				return fix;
			})(jQuery);
    </script>	                  
    </body>
</body>
</html>
